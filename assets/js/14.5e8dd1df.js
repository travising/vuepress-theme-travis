(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{502:function(s,n,a){"use strict";a.r(n);var e=a(23),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"flask"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#flask"}},[s._v("#")]),s._v(" Flask")]),s._v(" "),a("h3",{attrs:{id:"后端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#后端"}},[s._v("#")]),s._v(" 后端")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("from flask import Flask,url_for\nfrom flask import request\nfrom flask import jsonify\nfrom werkzeug.utils import secure_filename\nfrom sum import *\nfrom getDdInfo import *\nimport os\n\n# 实例化产生一个Flask对象\napp = Flask(__name__)\n\n#flask的路由是基于装饰器的\n@app.route('/') \ndef hello_world():\n    return 'Hello World!'\n\n@app.route('/upload', methods=['POST', 'GET'])\ndef upload():\n    if request.method == 'POST':\n        f = request.files['file']\n        basepath = os.path.dirname(__file__)  # 当前文件所在路径\n        upload_path = os.path.join(basepath, 'static', secure_filename(f.filename))  #注意：没有的文件夹一定要先创建，不然会提示没有该路径\n        f.save(upload_path)\n        return url_for('upload')\n    # return render_template('upload.html')    \n\n@app.route('/getDdInfo', methods=['POST', 'GET'])\ndef getDdInfo():\n  if request.method == 'POST':\n    tempFile = request.files['file']\n    path = os.path.join(os.path.dirname(__file__), tempFile.name)\n    tempFile.save(path)\n\n    width = int(request.form['width'])\n    height = int(request.form['height'])\n    offsetx = int(request.form['offsetx'])\n    offsety = int(request.form['offsety'])\n    mirror_flip = request.form['mirror']\n    print(width, height, offsetx, offsety, mirror_flip)\n    res = mtk_dd(path, width, height, offsetx, offsety, mirror_flip)\n    os.remove(path)\n    return res\n\n@app.route('/tools',methods=['GET','POST'])\ndef tools():\n    if request.method == 'POST':\n        #入参 json格式\n        # argsJson = request.get_json()\n        # arg1= argsJson['aa']\n        # arg2= argsJson['bb']\n        \n        #入参form格式\n        arg1= request.form['aa']\n        arg2= request.form['bb']\n        print(arg1, arg2, sum(arg1,arg2))\n    else:\n        arg1= 1\n        arg2= 2\n    #调用 test方法\n    res = '%d' %sum(int(arg1),int(arg2))\n    return res\n\nif __name__ == '__main__':\n    app.run(host='0.0.0.0')      # 看源码发现，最终调用了werkzeug的run_simple()\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br")])]),a("h3",{attrs:{id:"前端-el-upload组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前端-el-upload组件"}},[s._v("#")]),s._v(" 前端 el-upload组件")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('<el-upload\n  class="upload-demo tc-upload-btn"\n  ref="upload"\n  action="/flask/getDdInfo"\n  accept=".raw"\n  :data="rawInfo"\n  :on-success="getDdInfo"\n  :auto-upload="false">\n  <el-button slot="trigger" size="small" style="width:100%" type="primary">选取RAW文件</el-button>\n  <div slot="tip" class="el-upload__tip">结果生成需要时间，请耐心等待！</div>\n</el-upload>\n\n// data\n  rawInfo:{\n    width: 2592,\n    height: 1944,\n    offsetx: 0,\n    offsety: 0,\n    mirror: \'\',\n  },\n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("h3",{attrs:{id:"axio"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#axio"}},[s._v("#")]),s._v(" axio")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("<div>\n  <input type=\"file\" ref=\"files\" class=\"tc-upload\"/>\n  <el-button class=\"submitBtn\" type=\"primary\" @click=\"getDdInfo($event)\">Get DD Position</el-button>  \n</div>\n\n    getInfo(path){\n      let url = '/flask/'+ path\n      // console.log(url)\n      this.$axios.get(url)\n        .then(response => {\n          console.log(response.data); \n        }).catch(err => {\n          console.log(err);\n          this.$message.error('网络错误！');\n        });\n    },\n    postInfo(path){\n      let url = '/flask/'+ path\n      // console.log(url)\n      this.$axios.post(url, this.$qs.stringify({\n          aa: this.input1,\n          bb: this.input2\n        }))\n        .then(response => {\n          console.log(response.data); \n          this.sum = response.data;\n        }).catch(err => {\n          console.log(err);\n          this.$message.error('网络错误！');\n        });\n    },\n    getDdInfo() {\n      let fileVal = this.$refs.files.value;\n      if (fileVal == '' || fileVal == null || !fileVal) {\n          this.$message.error('请选择您要上传的文件');\n          return false\n      }\n      let file = this.$refs.files.files[0];\n      this.fileName=encodeURIComponent(file.name)\n      let url = '/flask/getDdInfo';\n      let dataFile = new FormData();\n      dataFile.append('file', file)\n      let config = {\n          headers: { 'Content-Type': 'multipart/form-data' }\n      };\n      this.$axios.post(url, dataFile, config)\n      .then(response => {\n          console.log(response.data); \n          this.$message.info('上传成功！');\n      }).catch(err => {\n          this.$message.error(err+'服务异常，请重试');\n          return false\n      })\n    },\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);